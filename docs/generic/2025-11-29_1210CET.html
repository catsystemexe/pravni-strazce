<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Právní strážce – GENERIC run (unknown)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            margin: 2rem;
            line-height: 1.5;
            background: #0f172a;
            color: #e5e7eb;
        }
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            background: #020617;
            padding: 1.5rem;
            border-radius: 0.75rem;
            border: 1px solid #1f2937;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        h1 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        .meta {
            font-size: 0.85rem;
            color: #9ca3af;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <h1>Právní strážce – GENERIC run</h1>
    <div class="meta">
      Tento soubor generuje GitHub Action z repozitáře catsystemexe/pravni-strazce.
      (UTC: unknown)
    </div>
    <pre>================================================================================
ODPOVĚĎ CODING AGENTA:

1. Stručné shrnutí (co chápu + high‑level stav)
------------------------------------------------

- Projekt má jasné rozdělení: runtime pipeline, enginy (core_legal, risk, judikatura, intent atd.), produktové konfigurace, doménová data v `data/_source` a „runtime“ data v `data`.
- Doménový model je soustředěn v `data/_source/domains/*` (per‑doména složky, u traffic_law navíc YAML + intents).
- Intent engine (`engines/intent/*`) očekává hotové, normalizované intent JSONy v `data/intents/**`, ale adresář `data/intents` momentálně v repozitáři neexistuje.
- Existují generátory/pomůcky v `tools/` (`generate_intents_from_domains.py`, `generate_intents_from_yaml.py`, `validate_intents.py`, `validate_data.py`), tj. je záměr mít „kompilační pipeline“ ze _source do runtime dat, ale není dovedena do konzistentního stavu.
- `traffic_law` je první doména, která už má v `_source` detailní strukturu (domain.yaml, subdomains.yaml, intents/*), ostatní domény jsou zatím buď prázdné, nebo jen s jedním JSONem.
- Struktura je blízko plánovanému modelu z dokumentace (`docs/intent.system.md`, `docs/README_datova_architektura.md`), ale chybí dotažená a zdokumentovaná pipeline `_source/domains → data/intents → intent_engine`.
- Klíčový problém: Intent engine je nyní „odpojený“ – nemá zdrojové `data/intents/*.json`, a `_normalize_raw` je mírně nesouladný s `IntentDefinition` (přidává/odstraňuje pole jinak, než dataclass deklaruje).

---

2. Detailní analýza

### 1) DOMÉNY – stav `data/_source/domains/*`

#### 1.1 Výčet domén (složky) a obsah

Pro každou doménu uvádím:
- `domain.yaml`: ano/ne (přesný stav vidíme pouze pro traffic_law, u ostatních složek soubory nejsou vypsané → předpokládám „není“, explicitně to zmiňuji).
- `subdomains.yaml`: ano/ne.
- `intents/` s JSONy: ano/ne.

**1. `school_law`**
- Cesta: `data/_source/domains/school_law`
- Viditelné soubory: žádné.
- Stav:
  - `domain.yaml`: ne (není uveden ve výpisu).
  - `subdomains.yaml`: ne.
  - `intents/`: ne.
- Poznámka: skeleton složka bez obsahu.

**2. `debt_law`**
- `data/_source/domains/debt_law`
- Soubory: neuvedeny.
- Stav:
  - `domain.yaml`: ne.
  - `subdomains.yaml`: ne.
  - `intents/`: ne.

**3. `environmental_law`**
- `data/_source/domains/environmental_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

**4. `property_construction_law`**
- `data/_source/domains/property_construction_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

**5. `social_law`**
- `data/_source/domains/social_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

**6. `media_ip_law`**
- `data/_source/domains/media_ip_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

**7. `constitutional_law`**
- `data/_source/domains/constitutional_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

**8. `family_law`**
- `data/_source/domains/family_law`
- Soubory: neuvedeny.
- Stav: vše chybí (pozn.: existuje `packs/family`, ale ne `_source` doménový YAML).

**9. `data_digital_law`**
- `data/_source/domains/data_digital_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

**10. `labor_law`**
- `data/_source/domains/labor_law`
- Soubory:
  - `labor_termination.json`
- Stav:
  - `domain.yaml`: ne.
  - `subdomains.yaml`: ne.
  - `intents/`: ne (namísto toho je zde přímo intentový JSON, ale bez standardizovaného podadresáře).
- Poznámka: starší formát – „intenty rovnou v doménové složce“.

**11. `health_law`**
- `data/_source/domains/health_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

**12. `tax_law`**
- `data/_source/domains/tax_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

**13. `administrative_law`**
- `data/_source/domains/administrative_law`
- Soubory:
  - `appeal_admin_decision.json`
- Stav:
  - `domain.yaml`: ne.
  - `subdomains.yaml`: ne.
  - `intents/`: ne, opět starší formát.

**14. `inheritance_law`**
- `data/_source/domains/inheritance_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

**15. `criminal_law`**
- `data/_source/domains/criminal_law`
- Soubory:
  - `criminal_defense.json`
- Stav:
  - `domain.yaml`: ne.
  - `subdomains.yaml`: ne.
  - `intents/`: ne (JSON leží přímo v kořenu domény).

**16. `traffic_law`**
- `data/_source/domains/traffic_law`
  - `domain.yaml`
  - `subdomains.yaml`
  - `readme.md`
- `data/_source/domains/traffic_law/intents`
  - více konkrétních intent JSONů (`traffic_speed_*`).
- Stav:
  - `domain.yaml`: ano.
  - `subdomains.yaml`: ano.
  - `intents/` s JSONy: ano (7 souborů).
- Poznámka: toto je skoro „referenční“ doména podle plánovaného modelu.

**17. `corporate_law`**
- `data/_source/domains/corporate_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

**18. `civil_law`**
- `data/_source/domains/civil_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

**19. `consumer_finance_law`**
- `data/_source/domains/consumer_finance_law`
  - `consumer_credit.json`
- Stav:
  - `domain.yaml`: ne.
  - `subdomains.yaml`: ne.
  - `intents/`: ne (JSON opět v kořeni).

**20. `international_law`**
- `data/_source/domains/international_law`
- Soubory: neuvedeny.
- Stav: vše chybí.

#### 1.2 Soulad s plánovaným modelem domén

Z dokumentace (`docs/domain_catalog.md`, `docs/domain_map_traffic_law.md`, `docs/README_datova_architektura.md`, `docs/intent.system.md` – nejsou zde vypsané, ale jejich existence ukazuje na model):

Očekávaný model (zjevně směřujete k tomuto):

- Per‑doména složka v `data/_source/domains/&lt;domain_key&gt;/`
- V ní:
  - `domain.yaml` – metadata domény (název, popis, mapping na runtime doménu/core_legal, případně vazba na `engines/domain_rules/*.yaml`).
  - `subdomains.yaml` – granularita uvnitř domény.
  - `intents/` – jemnozrnné intent JSONy (zdrojový formát).
- Dále: nějaký build/generate krok, který z těchto `_source` dat vygeneruje agregované/normalizované intent JSONy do `data/intents/*`.

Hodnocení:

- `traffic_law` model tento vzor už naplňuje (OK).
- `labor_law`, `administrative_law`, `criminal_law`, `consumer_finance_law` mají starší/nesourodý „single JSON přímo v kořeni domény“ (MIX).
- Většina ostatních domén je zatím jen prázdný skeleton bez YAML definice / intents (BROKEN/MISSING z pohledu plnohodnotného modelu).

---

### 2) INTENTS – loader + vztah k `_source`

#### 2.1 Loader `engines/intent/loader.py`

Klíčové body:

- `BASE_DIR = os.path.join(&quot;data&quot;, &quot;intents&quot;)`
  - Loader **očekává**, že runtime intent JSONy budou ležet v `data/intents/**`.
- Prochází `os.walk(BASE_DIR)` a načítá všechny `*.json`.
- `_normalize_raw`:
  - `id` → `intent_id`
  - doplňuje chybějící `keywords` a `negative_keywords` prázdnými listy.
  - odstraní `intent_group` (pokud je v raw) – to je zvláštní, protože `IntentDefinition` dataclass pole `intent_group` má.
  - definuje whitelist `valid_fields` (bez `intent_group` a `examples`!), cokoliv mimo tento set je odstraněno.

**Problém 1 – pole `intent_group` a `examples`:**

- `IntentDefinition`:

  ```python
  @dataclass
  class IntentDefinition:
      ...
      notes: str = &quot;&quot;
      version: str = &quot;1.0.0&quot;
      intent_group: str = &quot;general&quot;
      examples: List[str] = field(default_factory=list)
  ```

- `_normalize_raw`:
  - z `raw` aktivně odstraňuje `intent_group`.
  - ve `valid_fields` vůbec neobsahuje `intent_group` ani `examples`.

Důsledky:

- Z `_source` nebo runtime JSONů se jakékoliv expliticní `intent_group` nebo `examples` zahodí.
- Intent engine v `_heuristic_classify` chce číst `intent_group` z `IntentDefinition` a používá `getattr(intent_def, &quot;intent_group&quot;, None)`. To ale skončí vždy defaultem `&quot;general&quot;`, protože loader mu ten údaj nemůže dodat.
- Tj. logika pro skupiny intentů je designovaná, ale datově neprochází (MIX/BUG).

**Problém 2 – fyzický umístění runtime JSONů:**

- V repozitáři momentálně NEVIDÍM adresář `data/intents`.
- Tudíž `load_intents()` by při běhu na čistém checkoutu nic nenašlo → `get_intent_definitions()` vrátí prázdný seznam → heuristika `_heuristic_classify` nikdy nenajde žádný intent (vše padne do fallbacku `general`/`unknown`).
- Není zde zároveň explicitní popis nebo skript, který by „kompiloval“ `_source/domains/*` do `data/intents/*` a volal se z CI nebo před spuštěním runtime.

#### 2.2 Odkud se mají brát runtime intent JSONy?

Podle současného kódu:

- runtime = `data/intents/**` (striktně).
- `_source` = `data/_source/domains/**`:

  - `traffic_law/intents/*.json` – zjevně „autorita“ (přesnější, bohatší definice).
  - několik starších JSONů (např. `labor_termination.json`) – pravděpodobně je plán přemigrovat je do struktury `intents/` + doplnit `domain.yaml`.

V `tools/` jsou dva nástroje, které z názvu naznačují pipeline:

- `generate_intents_from_domains.py`
- `generate_intents_from_yaml.py`

Bez obsahu souborů ale nevidíme, zda:

- už počítají s `traffic_law/domain.yaml` apod.,
- generují výstup do `data/intents` nebo někam jinam.

Proto: „pipeline“ je nastíněná, ale není jasně formalizovaná ani konzistentně napojená na runtime engine.

#### 2.3 Konsistence struktury domén vs. intentů

- Doménová vrstva:
  - runtime domény jsou také v `engines/domain_rules/*.yaml` (spotrebitel, skolske, trestni atd.) – to je jiná dimenze (pravidla/risk), ale pojmenování domén by mělo být v souladu s doménami v `_source` a v `IntentDefinition.domain`.
- Intent vrstva:
  - `IntentDefinition.domain` je string; pro traffic_law‑intenty bude pravděpodobně `&quot;traffic_law&quot;`.
  - engine `core_legal` / `runtime/domain_catalog.py` (není zde vypsán obsah, ale pravděpodobně definuje mapování domén).
- V současnosti:
  - není vidět jednotný „master katalog“ domén, který by centralizoval:
    - ID domény
    - vazbu na `_source` doménu
    - vazbu na `engines/domain_rules` YAML
    - vazbu na `IntentDefinition.domain`.

Hodnocení:

- Vnitřně je teď struktura domén a intentů **nekonzistentní**:
  - loader čte z `data/intents`, ale `_source` je v `data/_source/domains`.
  - neexistuje implementovaný a dokumentovaný krok „kompilace“ `_source` → `data/intents`.
  - datový model definic intentů (dataclass) a normalizační funkce `_normalize_raw` se rozcházejí u několika polí.

---

### 3) NÁSTROJE – `tools/*` související s doménami a intenty

Ve výpisu jsou tyto relevantní skripty:

- `tools/validate_data.py`
- `tools/generate_intents_from_domains.py`
- `tools/generate_intents_from_yaml.py`
- `tools/validate_intents.py`

Obsah těchto souborů není zatím v promptu, takže:

- neumím přesně říct, jaké mají vstupy/výstupy, jen z názvů.
- přesto je lze rámcově kategorizovat.

#### 3.1 `tools/validate_data.py`

- Co má dělat (odhad):
  - Validovat strukturu dat v `data/_source` (doménové YAML, intent JSONy) proti schématům v `data/schema/domains.json` apod.
- Vstupy:
  - pravděpodobně adresář `data/_source` a JSON schema v `data/schema`.
- Výstupy:
  - exit kód + textová hlášení validace (chybějící pole, špatné typy).
- Stav:
  - bez kódu nelze říct, zda je rozbitý, ale vzhledem k čerstvě měněné adresářové struktuře by mohl používat **staré cesty** (BROKEN/MIX – je potřeba zkontrolovat a případně upravit).

#### 3.2 `tools/generate_intents_from_domains.py`

- Co má dělat (odhad):
  - Projít `data/_source/domains/*` a na základě `domain.yaml` a `intents/*.json` (případně dalších konfigů) vygenerovat normalizované runtime intent JSONy do `data/intents/&lt;something&gt;.json`.
- Vstupy:
  - `_source` doménové složky.
- Výstupy:
  - složka `data/intents` s agregovanými/normalized JSONy ve formátu očekávaném `IntentDefinition`.
- Stav:
  - není jasné, zda počítá s novou strukturou (traffic_law) nebo starou (single JSON v kořeni domény).
  - protože `data/intents` v repu zatím neexistuje, skript buď nebyl spuštěn, nebo generuje do jiné cesty.
  - předpokládám, že v současném stavu je **nepoužívaný** a může být částečně zastaralý (MIX).

#### 3.3 `tools/generate_intents_from_yaml.py`

- Co má dělat (odhad):
  - Generovat intent JSONy z YAML (např. definice intentů v YAML souborech, které v repu aktuálně nevidíme, nebo z `domain.yaml`/`subdomains.yaml`).
- Vstupy:
  - YAML zdroje (možná v `data/_source` nebo `docs`).
- Výstupy:
  - JSON definice (buď do `_source/domains/.../intents`, nebo přímo do `data/intents`).
- Stav:
  - zřejmě starší/alternativní cesta; bez jasné dokumentace pipeline je těžké říct, která varianta je „ta oficiální“.
  - potenciálně v konfliktu s `generate_intents_from_domains.py` (dvě cesty ke stejnému výsledku).
  - kandidát na konsolidaci (MIX).

#### 3.4 `tools/validate_intents.py`

- Co má dělat (odhad):
  - Kontrolovat, že všechny runtime intent JSONy (`data/intents/*`) odpovídají datovému modelu (např. proti `IntentDefinition` nebo JSON schema).
- Vstupy:
  - `data/intents` (která zatím v repu neexistuje).
- Výstupy:
  - report chyb v definicích intentů (chybějící klíče, špatné typy, id duplicity).
- Stav:
  - dokud není adresář `data/intents`/data, je prakticky nepoužitelný (BROKEN/MISSING z hlediska celkového workflow).

---

3. Vyhodnocení a doporučení (OK / MIX / BROKEN + konkrétní kroky)
-----------------------------------------------------------------

### 4.1 Stav (OK / MIX / BROKEN/MISSING)

**OK**

- Základní architektura engine → runtime pipeline (`runtime/orchestrator`, `engines/*`) – propojeno, testy běží.
- `engines/intent/engine.py`:
  - API je rozumné, heuristická klasifikace + volitelný LLM fallback.
  - Použití cache pro intent definice, lazy LLM.
- Doménový model `traffic_law`:
  - má `domain.yaml`, `subdomains.yaml`, per‑intent JSONy.
  - je dobrý příklad pro ostatní domény.

**MIX (částečně hotové / nekonzistentní)**

- Struktura domén v `_source`:
  - některé mají single JSON v kořeni, některé jsou prázdé, traffic_law je nový vzor.
- Intent datový model:
  - `IntentDefinition` vs. `_normalize_raw` nejsou v souladu (ignorují se `intent_group` a `examples`).
- Nástroje v `tools/`:
  - existují, ale není jasné, která cesta je „kanonická“ a na jaké cesty jsou napsány.
- Mapování domény ↔ runtime:
  - domény se objevují:
    - jako složky v `_source`,
    - jako `domain` v `IntentDefinition`,
    - jako YAML v `engines/domain_rules`.
  - chybí jeden master „domain_catalog“, který by toto sjednotil (i když existuje `runtime/domain_catalog.py`, není zde vidět, že by byl napojen na `_source` data).

**BROKEN/MISSING**

- Neexistuje složka `data/intents` s runtime JSONy → intent engine pracuje efektivně na prázdném datasetu.
- Chybí explicitně definovaná a zdokumentovaná pipeline:
  - `_source/domains/**` → (validate_*) → (generate_*) → `data/intents/**` → `engines/intent`.
- Mnoho domén nemá `domain.yaml`, `subdomains.yaml` ani `intents`.
- Validace dat (tools) je zřejmě psaná proti starší struktuře, není jasné, zda běží v CI.

---

4.2 Konkrétní doporučené kroky (v pořadí priority)

### Krátkodobé (odblokovat práci s intenty)

1. **Založit a naplnit minimální `data/intents` pro demonstraci**
   - Vytvořit ručně (zatím) alespoň 1–2 runtime intent JSONy, např. složku:
     - `data/intents/traffic_law/traffic_speed_offense_generic.json` (kopie/úprava `_source/domains/traffic_law/intents/traffic_speed_offense_generic.json` do formátu `IntentDefinition`).
   - Ověřit, že:
     - `python -m engines.intent.loader` (pokud doplníte malý test skript) načte data bez chyb.
     - Intent engine `_heuristic_classify` dává smysluplný výsledek.

2. **Opravit `_normalize_raw` tak, aby respektoval `IntentDefinition`**
   - V `valid_fields` přidat:
     - `&quot;intent_group&quot;`, `&quot;examples&quot;`.
   - Zrušit explicitní `raw.pop(&quot;intent_group&quot;)`.
   - Tím se zajistí, že:
     - loadery nebudou zahazovat `intent_group` a `examples` z JSONů.
     - `getattr(intent_def, &quot;intent_group&quot;, None)` vrátí reálné skupiny, ne jen default.
   - Krátký unit test pro `load_intents()` na jednom vzorovém JSONu by to měl pokrýt.

3. **Doplnit do `docs/intent.system.md` / `docs/README_datova_architektura.md` aktuální fakt, že runtime intenty jsou v `data/intents`**
   - Jasně napsat:
     - „Engine `engines.intent.loader` čte **pouze** z `data/intents/**`.“
     - `_source/domains/...` je „autorita“ a „build target“ je `data/intents`.
   - To umožní další práci, aniž by vývojáři tápali, odkud se mají intenty načítat.

4. **Zrychlený sanity check nástrojů**
   - Otevřít `tools/generate_intents_from_domains.py` a ověřit:
     - používá vstupní cesty `data/_source/domains`?
     - generuje výstup do `data/intents`?
   - Pokud ne, rychle upravit cesty tak, aby odpovídaly nové adresářové struktuře (bez velkého refactoringu logiky).

### Střednědobé (sjednocení datového modelu, pipeline `_source → data/intents`)

5. **Navrhnout a implementovat „kompilační pipeline“**
   - Cíl:
     - Jeden kanonický skript, např. `tools/build_intents.py`, který:
       1. Projde všechny domény v `data/_source/domains/*`.
       2. Pro každou:
          - načte `domain.yaml` (pokud existuje),
          - načte `subdomains.yaml`,
          - načte per‑intent JSON/y v `intents/` (nebo případně single JSON v kořeni, viz staré domény).
       3. Normalizuje do `IntentDefinition` tvaru.
       4. Zapíše do `data/intents/&lt;domain&gt;/&lt;intent_id&gt;.json`.
   - `generate_intents_from_domains.py` a `generate_intents_from_yaml.py`:
     - buď sjednotit do jednoho nástroje,
     - nebo jasně deklarovat, který je „hlavní“ a druhý deprecovat.

6. **Dodat explicitní mapping mezi `_source` doménami a runtime doménami**
   - Ideálně centrálně v jednom YAML/JSON, nebo:
     - využít `data/schema/domains.json` + `runtime/domain_catalog.py` jako jeden zdroj pravdy.
   - Tento mapping by měl obsahovat:
     - `domain_key` (např. `traffic_law`),
     - název v češtině,
     - odkaz na `engines/domain_rules/&lt;x&gt;.yaml` (pokud existuje),
     - informaci, zda se pro tuto doménu již mají generovat intenty.

7. **Migrace starých doménových JSONů na traffic_law‑like strukturu**
   - Pro domény:
     - `labor_law`, `administrative_law`, `criminal_law`, `consumer_finance_law`:
   - Kroky:
     1. Vytvořit v každé doméně `intents/` složku.
     2. Přesunout existující `*.json` do `intents/`.
     3. Dodat minimální `domain.yaml` + případně `subdomains.yaml`.
   - Poté upravit „build script“, aby nový formát bral jako primární a starý (single JSON v kořeni) jako deprecated.

8. **Zapojit validace do CI**
   - `tools/validate_data.py` a `tools/validate_intents.py`:
     - Upravit tak, aby:
       - validovaly nový formát (`domain.yaml`, `subdomains.yaml`, `_source/domains/*/intents/*.json`, `data/intents/*`).
       - byly spustitelné z CI (GitHub Actions apod.).
   - Přidat krátkou sekci do `docs/`:
     - „Jak validovat data (lokálně i v CI).“

### Dlouhodobé (čistší testy, dokumentace, refaktoring)

9. **Refaktoring nástrojů v `tools/` a jejich dokumentace**

   - Cíl:
     - jednoznačný „happy path“ pro práci s doménami a intent daty:
       1. Upravuji `_source/domains/traffic_law/...`.
       2. Spustím `python tools/build_intents.py traffic_law`.
       3. Ověřím `python tools/validate_intents.py`.
       4. Spustím testy.
   - V dokumentaci:
     - Stručný „workflow pro produktového právníka“ (přidání nového intentu, nové domény).

10. **Testy pro intent pipeline**
    - Přidat unit testy a integrační test:
      - test na `load_intents()` (na malé testovací sadě JSONů v `tests/data/intents`).
      - test na build script (z `_source` sample → `data/intents`).
      - test pro `intent_engine.run` na typických dotazech pro traffic_law (data‑driven testy, kde se očekává konkrétní intent_id/doména).

11. **Provázání doménových pravidel s intent enginem**
    - Dlouhodobě:
      - když `intent_engine` vrátí `domain=&quot;traffic_law&quot;`, měl by se na úrovni core_legal/rule enginu využít příslušný `engines/domain_rules/*.yaml`.
      - může být potřeba doplnit do `domain.yaml` referenci na konkrétní `domain_rules` soubor.

---

Co není jasné / co bych potřeboval vidět pro přesnější návrhy
-------------------------------------------------------------

- Obsah:
  - `docs/intent.system.md` – definice datového modelu intentů a plánovaná pipeline.
  - `docs/README_datova_architektura.md` – popis plánovaného vztahu `_source` ↔ `data/intents`.
  - `runtime/domain_catalog.py` – jak dnes runtime vnímá seznam domén.
  - `tools/generate_intents_from_domains.py` a `tools/generate_intents_from_yaml.py` – skutečná implementace cesty `_source → data/intents`.
  - Pár typických `_source` intent JSONů (např. z `traffic_law/intents`) – zda už odpovídají `IntentDefinition`, nebo je potřeba mapovací logika.

Na základě těchto souborů bych mohl:
- navrhnout přesný JSON/YAML schema pro domény a intenty,
- navrhnout konkrétní implementaci `build_intents.py` (pseudokód a transformace polí),
- lépe sladit `engines/domain_rules` s doménovým katalogem a intent enginem.
================================================================================
</pre>
</body>
</html>
